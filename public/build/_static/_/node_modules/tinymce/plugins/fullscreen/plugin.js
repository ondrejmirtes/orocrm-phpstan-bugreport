!function(){"use strict";var n=function(n){var e=n;return{get:function(){return e},set:function(n){e=n}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(n){return function(e){return t=typeof(r=e),(null===r?"null":"object"===t&&(Array.prototype.isPrototypeOf(r)||r.constructor&&"Array"===r.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(r)||r.constructor&&"String"===r.constructor.name)?"string":t)===n;var r,t}},t=function(n){return function(e){return typeof e===n}},o=r("string"),i=r("array"),u=t("boolean"),c=function(n){return!function(n){return null==n}(n)},a=t("function"),s=t("number"),l=function(){},f=function(n){return function(){return n}};function d(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o=e.concat(r);return n.apply(null,o)}}var m,v,h=f(!1),g=f(!0),p=function(){return w},w={fold:function(n,e){return n()},isSome:h,isNone:g,getOr:v=function(n){return n},getOrThunk:m=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:v,orThunk:m,map:p,each:l,bind:p,exists:h,forall:g,filter:function(){return p()},toArray:function(){return[]},toString:f("none()")},y=function(n){var e=f(n),r=function(){return o},t=function(e){return e(n)},o={fold:function(e,r){return r(n)},isSome:g,isNone:h,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:r,orThunk:r,map:function(e){return y(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:w},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},b={some:y,none:p,from:function(n){return null==n?w:y(n)}},S=function(){return S=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},S.apply(this,arguments)},x=function(e){var r=n(b.none()),t=function(){return r.get().each(e)};return{clear:function(){t(),r.set(b.none())},isSet:function(){return r.get().isSome()},get:function(){return r.get()},set:function(n){t(),r.set(b.some(n))}}},O=function(){return x((function(n){return n.unbind()}))},E=Array.prototype.push,F=function(n,e){for(var r=n.length,t=new Array(r),o=0;o<r;o++){var i=n[o];t[o]=e(i,o)}return t},k=function(n,e){for(var r=0,t=n.length;r<t;r++)e(n[r],r)},T=function(n,e){for(var r=[],t=0,o=n.length;t<o;t++){var i=n[t];e(i,t)&&r.push(i)}return r},C=function(n,e){return function(n,e,r){for(var t=0,o=n.length;t<o;t++){var i=n[t];if(e(i,t))return b.some(i);if(r(i,t))break}return b.none()}(n,e,h)},A=Object.keys,R=function(n,e){return-1!==n.indexOf(e)},P=function(n){return void 0!==n.style&&a(n.style.getPropertyValue)},L=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},M=L;"undefined"!=typeof window?window:Function("return this;")();var D=function(n){return function(e){return function(n){return n.dom.nodeType}(e)===n}},N=D(1),W=D(3),q=D(9),H=D(11),I=function(){return j(0,0)},j=function(n,e){return{major:n,minor:e}},B={nu:j,detect:function(n,e){var r=String(e).toLowerCase();return 0===n.length?I():function(n,e){var r=function(n,e){for(var r=0;r<n.length;r++){var t=n[r];if(t.test(e))return t}}(n,e);if(!r)return{major:0,minor:0};var t=function(n){return Number(e.replace(r,"$"+n))};return j(t(1),t(2))}(n,r)},unknown:I},V=function(n,e){var r=String(e).toLowerCase();return C(n,(function(n){return n.search(r)}))},X=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,_=function(n){return function(e){return R(e,n)}},z=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return R(n,"edge/")&&R(n,"chrome")&&R(n,"safari")&&R(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,X],search:function(n){return R(n,"chrome")&&!R(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return R(n,"msie")||R(n,"trident")}},{name:"Opera",versionRegexes:[X,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:_("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:_("firefox")},{name:"Safari",versionRegexes:[X,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(R(n,"safari")||R(n,"mobile/"))&&R(n,"applewebkit")}}],U=[{name:"Windows",search:_("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return R(n,"iphone")||R(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:_("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:_("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:_("linux"),versionRegexes:[]},{name:"Solaris",search:_("sunos"),versionRegexes:[]},{name:"FreeBSD",search:_("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:_("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],$={browsers:f(z),oses:f(U)},K="Edge",Y="Chrome",G="Opera",J="Firefox",Q="Safari",Z=function(n){var e=n.current,r=n.version,t=function(n){return function(){return e===n}};return{current:e,version:r,isEdge:t(K),isChrome:t(Y),isIE:t("IE"),isOpera:t(G),isFirefox:t(J),isSafari:t(Q)}},nn=function(){return Z({current:void 0,version:B.unknown()})},en=Z,rn=(f(K),f(Y),f("IE"),f(G),f(J),f(Q),"Windows"),tn="Android",on="Linux",un="Solaris",cn="FreeBSD",an="ChromeOS",sn=function(n){var e=n.current,r=n.version,t=function(n){return function(){return e===n}};return{current:e,version:r,isWindows:t(rn),isiOS:t("iOS"),isAndroid:t(tn),isOSX:t("OSX"),isLinux:t(on),isSolaris:t(un),isFreeBSD:t(cn),isChromeOS:t(an)}},ln=function(){return sn({current:void 0,version:B.unknown()})},fn=sn,dn=(f(rn),f("iOS"),f(tn),f(on),f("OSX"),f(un),f(cn),f(an),function(n,e,r){var t=$.browsers(),o=$.oses(),i=e.bind((function(n){return function(n,e){return function(n,e){for(var r=0;r<n.length;r++){var t=e(n[r]);if(t.isSome())return t}return b.none()}(e.brands,(function(e){var r=e.brand.toLowerCase();return C(n,(function(n){var e;return r===(null===(e=n.brand)||void 0===e?void 0:e.toLowerCase())})).map((function(n){return{current:n.name,version:B.nu(parseInt(e.version,10),0)}}))}))}(t,n)})).orThunk((function(){return function(n,e){return V(n,e).map((function(n){var r=B.detect(n.versionRegexes,e);return{current:n.name,version:r}}))}(t,n)})).fold(nn,en),u=function(n,e){return V(n,e).map((function(n){var r=B.detect(n.versionRegexes,e);return{current:n.name,version:r}}))}(o,n).fold(ln,fn),c=function(n,e,r,t){var o=n.isiOS()&&!0===/ipad/i.test(r),i=n.isiOS()&&!o,u=n.isiOS()||n.isAndroid(),c=u||t("(pointer:coarse)"),a=o||!i&&u&&t("(min-device-width:768px)"),s=i||u&&!a,l=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(r),d=!s&&!a&&!l;return{isiPad:f(o),isiPhone:f(i),isTablet:f(a),isPhone:f(s),isTouch:f(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:f(l),isDesktop:f(d)}}(u,i,n,r);return{browser:i,os:u,deviceType:c}}),mn=function(n){return window.matchMedia(n).matches},vn=function(n){var e,r=!1;return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return r||(r=!0,e=n.apply(null,t)),e}}((function(){return dn(navigator.userAgent,b.from(navigator.userAgentData),mn)})),hn=function(n,e){var r=n.dom;if(1!==r.nodeType)return!1;var t=r;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},gn=function(n){return M(n.dom.ownerDocument)},pn=function(n){return F(n.dom.childNodes,M)},wn=a(Element.prototype.attachShadow)&&a(Node.prototype.getRootNode),yn=f(wn),bn=wn?function(n){return M(n.dom.getRootNode())}:function(n){return q(n)?n:gn(n)},Sn=function(n){var e,r=bn(n);return H(e=r)&&c(e.dom.host)?b.some(r):b.none()},xn=function(n){return M(n.dom.host)},On=function(n){var e=W(n)?n.dom.parentNode:n.dom;if(null==e||null===e.ownerDocument)return!1;var r,t,o=e.ownerDocument;return Sn(M(e)).fold((function(){return o.body.contains(e)}),(r=On,t=xn,function(n){return r(t(n))}))},En=function(n,e){var r=n.dom.getAttribute(e);return null===r?void 0:r},Fn=function(n,e){n.dom.removeAttribute(e)},kn=function(n,e){var r=n.dom;!function(n,e){for(var r=A(n),t=0,o=r.length;t<o;t++){var i=r[t];e(n[i],i)}}(e,(function(n,e){!function(n,e,r){if(!o(r))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",n),new Error("CSS value must be a string: "+r);P(n)&&n.style.setProperty(e,r)}(r,e,n)}))},Tn=function(n){var e,r,t=M(function(n){if(yn()&&c(n.target)){var e=M(n.target);if(N(e)&&c(e.dom.shadowRoot)&&n.composed&&n.composedPath){var r=n.composedPath();if(r)return function(n,e){return 0<n.length?b.some(n[0]):b.none()}(r)}}return b.from(n.target)}(n).getOr(n.target)),o=function(){return n.stopPropagation()},i=function(){return n.preventDefault()},u=(e=i,r=o,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e(r.apply(null,n))});return function(n,e,r,t,o,i,u){return{target:n,x:e,y:r,stop:t,prevent:o,kill:i,raw:u}}(t,n.clientX,n.clientY,o,i,u,n)},Cn=function(n,e,r,t){n.dom.removeEventListener(e,r,t)},An=g,Rn=function(n,e,r){return function(n,e,r,t){return function(n,e,r,t,o){var i=function(n,e){return function(r){n(r)&&e(Tn(r))}}(r,t);return n.dom.addEventListener(e,i,o),{unbind:d(Cn,n,e,i,o)}}(n,e,r,t,!1)}(n,e,An,r)},Pn=function(n,e){return{left:n,top:e,translate:function(r,t){return Pn(n+r,e+t)}}},Ln=Pn,Mn=function(n){var e=void 0===n?window:n;return vn().browser.isFirefox()?b.none():b.from(e.visualViewport)},Dn=function(n,e,r,t){return{x:n,y:e,width:r,height:t,right:n+r,bottom:e+t}},Nn=function(n){var e=void 0===n?window:n,r=e.document,t=function(n){var e=void 0!==n?n.dom:document,r=e.body.scrollLeft||e.documentElement.scrollLeft,t=e.body.scrollTop||e.documentElement.scrollTop;return Ln(r,t)}(M(r));return Mn(e).fold((function(){var n=e.document.documentElement,r=n.clientWidth,o=n.clientHeight;return Dn(t.left,t.top,r,o)}),(function(n){return Dn(Math.max(n.pageLeft,t.left),Math.max(n.pageTop,t.top),n.width,n.height)}))},Wn=function(n,e,r){return Mn(r).map((function(r){var t=function(n){return e(Tn(n))};return r.addEventListener(n,t),{unbind:function(){return r.removeEventListener(n,t)}}})).getOrThunk((function(){return{unbind:l}}))},qn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Hn=tinymce.util.Tools.resolve("tinymce.Env"),In=tinymce.util.Tools.resolve("tinymce.util.Delay"),jn=function(n,e){n.fire("FullscreenStateChanged",{state:e})},Bn=function(n){return n.getParam("fullscreen_native",!1,"boolean")},Vn=function(n){return n.dom===(void 0!==(e=gn(n).dom).fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null);var e},Xn=function(n,e,r){return function(n,e,r){return T(function(n,e){for(var r=a(e)?e:h,t=n.dom,o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=M(i);if(o.push(u),!0===r(u))break;t=i}return o}(n,r),e)}(n,(function(n){return hn(n,e)}),r)},_n=function(n,e){return function(n,r){return T(function(n){return b.from(n.dom.parentNode).map(M)}(t=n).map(pn).map((function(n){return T(n,(function(n){return e=n,!(t.dom===e.dom);var e}))})).getOr([]),(function(n){return hn(n,e)}));var t}(n)},zn="data-ephox-mobile-fullscreen-style",Un="position:absolute!important;",$n="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Kn=Hn.os.isAndroid(),Yn=function(n){var e=function(n,e){var r=n.dom,t=window.getComputedStyle(r).getPropertyValue(e);return""!==t||On(n)?t:function(n,e){return P(n)?n.style.getPropertyValue(e):""}(r,e)}(n,"background-color");return void 0!==e&&""!==e?"background-color:"+e+"!important":"background-color:rgb(255,255,255)!important;"},Gn=qn.DOM,Jn=Mn().fold((function(){return{bind:l,unbind:l}}),(function(n){var e,r=(e=x(l),S(S({},e),{on:function(n){return e.get().each(n)}})),t=O(),o=O(),i=In.throttle((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((function(){r.on((function(e){return kn(e,{top:n.offsetTop+"px",left:n.offsetLeft+"px",height:n.height+"px",width:n.width+"px"})}))}))}),50);return{bind:function(n){r.set(n),i(),t.set(Wn("resize",i)),o.set(Wn("scroll",i))},unbind:function(){r.on((function(){t.clear(),o.clear()})),r.clear()}}})),Qn=function(n,e){var r,t,c,a=document.body,l=document.documentElement,f=n.getContainer(),d=M(f),m=function(n){var e=M(n.getElement());return Sn(e).map(xn).getOrThunk((function(){return function(n){var e=n.dom.body;if(null==e)throw new Error("Body is not available yet");return M(e)}(gn(e))}))}(n),v=e.get(),h=M(n.getBody()),g=Hn.deviceType.isTouch(),p=f.style,w=n.iframeElement.style,y=function(n){n(a,"tox-fullscreen"),n(l,"tox-fullscreen"),n(f,"tox-fullscreen"),Sn(d).map((function(n){return xn(n).dom})).each((function(e){n(e,"tox-fullscreen"),n(e,"tox-shadowhost")}))},S=function(){var r,t;g&&(r=n.dom,t=function(n,e){var r,t=document;return 1!==(r=t).nodeType&&9!==r.nodeType&&11!==r.nodeType||0===r.childElementCount?[]:F(t.querySelectorAll(n),M)}("["+zn+"]"),k(t,(function(n){var e=En(n,zn);"no-styles"!==e?kn(n,r.parseStyle(e)):Fn(n,"style"),Fn(n,zn)}))),y(Gn.removeClass),Jn.unbind(),b.from(e.get()).each((function(n){return n.fullscreenChangeHandler.unbind()}))};if(v)v.fullscreenChangeHandler.unbind(),Bn(n)&&Vn(m)&&((t=gn(m).dom).exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()),w.width=v.iframeWidth,w.height=v.iframeHeight,p.width=v.containerWidth,p.height=v.containerHeight,p.top=v.containerTop,p.left=v.containerLeft,S(),r=v.scrollPos,window.scrollTo(r.x,r.y),e.set(null),jn(n,!1),n.off("remove",S);else{var x=Rn(gn(m),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(function(r){Bn(n)&&(Vn(m)||null===e.get()||Qn(n,e))})),O={scrollPos:Nn(window),containerWidth:p.width,containerHeight:p.height,containerTop:p.top,containerLeft:p.left,iframeWidth:w.width,iframeHeight:w.height,fullscreenChangeHandler:x};g&&function(n,e,r){var t=function(e){return function(r){var t=En(r,"style"),i=void 0===t?"no-styles":t.trim();i!==e&&(function(n,e,r){!function(n,e,r){if(!(o(r)||u(r)||s(r)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",r,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,r+"")}(n.dom,e,r)}(r,zn,i),kn(r,n.parseStyle(e)))}},c=Xn(e,"*"),a=function(n){for(var e=[],r=0,t=n.length;r<t;++r){if(!i(n[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+n);E.apply(e,n[r])}return e}(F(c,(function(n){return _n(n,"*:not(.tox-silver-sink)")}))),l=Yn(r);k(a,t("display:none!important;")),k(c,t(Un+$n+l)),t((!0===Kn?"":Un)+$n+l)(e)}(n.dom,d,h),w.width=w.height="100%",p.width=p.height="",y(Gn.addClass),Jn.bind(d),n.on("remove",S),e.set(O),Bn(n)&&((c=m.dom).requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.webkitRequestFullScreen&&c.webkitRequestFullScreen()),jn(n,!0)}},Zn=function(n,e){return function(r){r.setActive(null!==e.get());var t=function(n){return r.setActive(n.state)};return n.on("FullscreenStateChanged",t),function(){return n.off("FullscreenStateChanged",t)}}};e.add("fullscreen",(function(e){var r=n(null);return e.inline||(function(n,e){n.addCommand("mceFullScreen",(function(){Qn(n,e)}))}(e,r),function(n,e){var r=function(){return n.execCommand("mceFullScreen")};n.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:r,onSetup:Zn(n,e)}),n.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:r,onSetup:Zn(n,e)})}(e,r),e.addShortcut("Meta+Shift+F","","mceFullScreen")),function(n){return{isFullscreen:function(){return null!==n.get()}}}(r)}))}();